import{j as e,P as a}from"./ui-components-form-Dywr9yTf.js";import{r as s,L as i,A as r,n as t,B as o,c as n,b as l,e as d,f as c,a as h,o as g}from"./vendor-gestalt-B3UPgpSj.js";import{s as m}from"./app-services-B92wDHXI.js";import{t as j}from"./app-constants-wElj3pIu.js";import{z as p}from"./app-utils-CDJKhibu.js";import"./vendor-react-BCfQGrxo.js";import"./vendor-prop-types-CZV6H2So.js";import"./vendor-firebase-BBMrpKQ9.js";function x({isOpen:a,onClose:x,categories:u,language:y,user:f,onShareCategory:b,onRemoveShare:C}){const[v,S]=s.useState(""),[w,R]=s.useState(""),[k,q]=s.useState("share"),[z,T]=s.useState(!1),[I,B]=s.useState([]),[E,M]=s.useState([]);s.useEffect((()=>{a&&f&&N()}),[a,f]);const N=async()=>{if(f){T(!0);try{const e=await m.getMyShares(f.uid);B(e);const a=await m.getSharedWithMe(f.uid);M(a)}catch(e){}finally{T(!1)}}};return a?e.jsx(i,{zIndex:p,children:e.jsxs(r,{accessibilityLabel:j[y].shareCategory,heading:j[y].shareCategory,onDismiss:x,footer:e.jsx(o,{display:"flex",justifyContent:"end",padding:2,children:e.jsx(n,{text:j[y].close,onClick:x})}),size:"md",children:[e.jsx(t,{activeTabIndex:"share"===k?0:1,onChange:({activeTabIndex:e})=>{q(0===e?"share":"list")},tabs:[{text:j[y].shareWithUser,id:"share"},{text:j[y].sharing,id:"list"}]}),"share"===k?e.jsxs(o,{padding:4,children:[e.jsx(o,{marginBottom:4,children:e.jsx(l,{id:"categoryToShare",label:j[y].taskCategory,onChange:({value:e})=>S(e),placeholder:j[y].taskCategory,value:v,disabled:z,children:u.map((a=>e.jsx(l.Option,{label:j[y].categories[a]||a,value:a},a)))})}),e.jsx(o,{marginBottom:4,children:e.jsx(d,{id:"targetEmail",onChange:({value:e})=>R(e),placeholder:j[y].emailPlaceholder,label:j[y].shareWith,value:w,type:"email",disabled:z})}),e.jsx(n,{text:j[y].shareCategory,color:"blue",onClick:async()=>{if(v&&w&&f){T(!0);try{await b(v,w),R(""),S(""),N()}catch(e){}finally{T(!1)}}},disabled:!v||!w||z})]}):e.jsxs(o,{padding:4,marginTop:2,children:[e.jsx(c,{weight:"bold",children:j[y].sharedByMe}),0===I.length?e.jsx(o,{padding:2,children:e.jsx(c,{children:j[y].noCustomCategories})}):I.map((a=>e.jsxs(h,{alignItems:"center",justifyContent:"between",gap:2,children:[e.jsxs(o,{flex:"grow",children:[e.jsx(c,{weight:"bold",children:j[y].categories[a.categoryName]||a.categoryName}),e.jsx(c,{size:"100",children:a.targetEmail})]}),e.jsx(n,{text:j[y].removeShare,onClick:()=>(async e=>{T(!0);try{await C(e),N()}catch(a){}finally{T(!1)}})(a.id),color:"red",size:"sm",disabled:z})]},a.id))),e.jsxs(o,{marginTop:4,children:[e.jsx(c,{weight:"bold",children:j[y].sharedWithMe}),0===E.length?e.jsx(o,{padding:2,children:e.jsx(c,{children:j[y].noCustomCategories})}):E.map((a=>e.jsxs(h,{alignItems:"center",gap:2,children:[e.jsx(g,{icon:"person",accessibilityLabel:"User",color:"darkGray"}),e.jsxs(o,{children:[e.jsx(c,{weight:"bold",children:j[y].categories[a.categoryName]||a.categoryName}),e.jsx(c,{size:"100",children:a.targetEmail})]})]},a.id)))]})]})]})}):null}x.propTypes={isOpen:a.bool.isRequired,onClose:a.func.isRequired,categories:a.array.isRequired,language:a.string.isRequired,user:a.object,onShareCategory:a.func.isRequired,onRemoveShare:a.func.isRequired};export{x as default};
