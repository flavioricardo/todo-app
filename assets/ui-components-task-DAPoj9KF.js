import{j as e,P as a}from"./ui-components-form-GohqK_C5.js";import{r as i,B as o,h as n,d as s,l,I as t,e as d,m as r,R as g}from"./vendor-react-RUKFzHni.js";import{t as c,g as p}from"./app-constants-wElj3pIu.js";import{c as m}from"./app-services-RgBSrzrG.js";import"./vendor-prop-types-CXM-vOnM.js";import"./app-utils-Cfzkm4A-.js";import"./vendor-firebase-D18ONwfu.js";const k=({children:a,isCompleted:i})=>{const o=g.useRef(null);return e.jsx("div",{ref:o,style:{textDecoration:i?"line-through":"none"},children:e.jsx(n,{overflow:"breakWord",lineClamp:2,children:a})})},T=({task:a,onToggleTask:i,showCategory:s,language:g,isLoading:m,onEditTask:T})=>{const u=a.completed;return e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"between",padding:2,opacity:u?.6:1,children:[m?e.jsxs(o,{paddingX:2,display:"flex",alignItems:"center",children:[e.jsx(d,{show:!0,size:"sm",accessibilityLabel:c[g].loadingTasks}),e.jsx(o,{paddingX:2,children:e.jsx(n,{children:a.text})})]}):e.jsx(r,{id:`task-${a.id}`,checked:u,label:e.jsx(k,{isCompleted:u,children:a.text}),onChange:()=>i(a.id),"aria-checked":u,"aria-label":a.text}),!u&&e.jsx(t,{icon:"edit",size:"xs",accessibilityLabel:c[g].editTask,onClick:()=>T(a),"aria-label":c[g].editTask}),s&&e.jsx(l,{text:c[g].categories[a.category]||a.category,type:p(a.category),"aria-label":c[g].categories[a.category]||a.category})]})},u=({category:a,tasks:i,onToggleTask:s,language:d,isMobile:r,isExpanded:g,onToggleExpand:m,loadingTaskIds:k,onEditTask:u})=>e.jsxs(o,{marginBottom:2,marginEnd:2,borderStyle:"shadow",color:"elevationFloating",rounding:3,padding:3,userSelect:"none",flex:"grow",column:r||g?12:3,width:g?"100%":void 0,position:"relative",children:[e.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"between",marginBottom:1,"aria-label":c[d].categories[a]||a,children:[e.jsx(n,{size:"sm",children:e.jsx(l,{text:c[d].categories[a]||a,type:p(a)})}),e.jsx(t,{size:"sm",selected:g,icon:g?"minimize":"maximize",onClick:()=>m(a),accessibilityLabel:g?c[d].minimize:c[d].expand,"aria-label":g?c[d].minimize:c[d].expand,"aria-pressed":g})]}),i.map((a=>e.jsx(T,{task:a,onToggleTask:s,showCategory:!1,language:d,isLoading:k.includes(a.id),onEditTask:u},a.id)))]}),h=({language:a})=>e.jsx(o,{padding:3,display:"flex",justifyContent:"center",children:e.jsx(n,{children:c[a].emptyTaskList})});function y({tasks:a,onToggleTask:l,onClearCompleted:t,filterStatus:d,groupBy:r,language:g,isMobile:p,loadingTaskIds:k=[],onEditTask:y}){const[b,f]=i.useState(null),x=e=>{f(b===e?null:e)},C=e=>[...e].sort(((e,a)=>e.completed===a.completed?0:e.completed?1:-1)),E=a.some((e=>e.completed))&&"pending"!==d;return e.jsxs(e.Fragment,{children:[e.jsxs(o,{marginTop:4,width:"100%",children:[e.jsx(o,{marginBottom:2,children:e.jsx(n,{size:"100",children:c[g].taskList})}),e.jsx(o,{display:p||"category"!==r?void 0:"flex",wrap:p||"category"!==r?void 0:"wrap",legend:c[g].taskList,children:(()=>{if(0===a.length)return e.jsx(h,{language:g});if("category"===r){const i=a.reduce(((e,a)=>(e[a.category]||(e[a.category]=[]),e[a.category].push(a),e)),{}),o=m.sortCategoriesByOrder(Object.keys(i));return[...o].sort(((e,a)=>b===e?-1:b===a?1:o.indexOf(e)-o.indexOf(a))).map((a=>e.jsx(u,{category:a,tasks:C(i[a]),onToggleTask:l,language:g,isMobile:p,isExpanded:b===a,onToggleExpand:x,loadingTaskIds:k,onEditTask:y},a)))}return C(a).map((a=>e.jsx(T,{task:a,onToggleTask:l,showCategory:"category"!==r,language:g,isLoading:k.includes(a.id),onEditTask:y},a.id)))})()})]}),E&&e.jsx(o,{marginTop:4,width:"100%",display:"flex",children:e.jsx(s,{text:c[g].clearCompleted,onClick:t,color:"red",fullWidth:p,size:p?"lg":"md","aria-label":c[g].clearCompleted})})]})}k.propTypes={children:a.node.isRequired,isCompleted:a.bool.isRequired},T.propTypes={task:a.shape({id:a.string.isRequired,text:a.string.isRequired,category:a.string.isRequired,completed:a.bool.isRequired}).isRequired,onToggleTask:a.func.isRequired,showCategory:a.bool.isRequired,language:a.string.isRequired,isLoading:a.bool,onEditTask:a.func.isRequired},T.defaultProps={isLoading:!1},u.propTypes={category:a.string.isRequired,tasks:a.array.isRequired,onToggleTask:a.func.isRequired,language:a.string.isRequired,isMobile:a.bool,isExpanded:a.bool,onToggleExpand:a.func.isRequired,loadingTaskIds:a.array,onEditTask:a.func.isRequired},u.defaultProps={loadingTaskIds:[]},h.propTypes={language:a.string.isRequired},y.propTypes={tasks:a.arrayOf(a.shape({id:a.string.isRequired,text:a.string.isRequired,category:a.string.isRequired,completed:a.bool.isRequired})).isRequired,onToggleTask:a.func.isRequired,onClearCompleted:a.func.isRequired,filterStatus:a.string.isRequired,groupBy:a.string,language:a.string.isRequired,isMobile:a.bool,loadingTaskIds:a.array,onEditTask:a.func.isRequired},y.defaultProps={groupBy:"none",isMobile:!1,loadingTaskIds:[]};export{y as default};
