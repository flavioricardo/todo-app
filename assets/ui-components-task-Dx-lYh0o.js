import{P as e,j as i}from"./ui-components-form-BMap5DMW.js";import{r as s,B as a,T as o,d as t,j as n,I as r,f as d,k as l,R as g}from"./vendor-gestalt-k6pdCueW.js";import{t as c,g as p}from"./app-constants-wElj3pIu.js";import{c as u}from"./app-services-DIS2-Mem.js";const x=({children:e,isCompleted:s})=>{const a=g.useRef(null);return i.jsx("div",{ref:a,style:{textDecoration:s?"line-through":"none"},children:i.jsx(o,{overflow:"breakWord",lineClamp:2,children:e})})},m=({task:e,onToggleTask:s,showCategory:t,language:g,isLoading:u,onEditTask:m})=>{const y=e.completed;return i.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"between",padding:2,opacity:y?.6:1,children:[u?i.jsxs(a,{paddingX:2,display:"flex",alignItems:"center",children:[i.jsx(d,{show:!0,size:"sm",accessibilityLabel:c[g].loadingTasks}),i.jsx(a,{paddingX:2,children:i.jsx(o,{children:e.text})})]}):i.jsx(l,{id:`task-${e.id}`,checked:y,label:i.jsx(x,{isCompleted:y,children:e.text}),onChange:()=>s(e.id),"aria-checked":y,"aria-label":e.text}),!y&&i.jsx(r,{icon:"edit",size:"xs",accessibilityLabel:c[g].editTask,onClick:()=>m(e),"aria-label":c[g].editTask}),t&&i.jsx(n,{text:c[g].categories[e.category]||e.category,type:p(e.category),"aria-label":c[g].categories[e.category]||e.category})]})},y=({category:e,tasks:s,onToggleTask:t,language:d,isMobile:l,isExpanded:g,onToggleExpand:u,loadingTaskIds:x,onEditTask:y})=>i.jsxs(a,{marginBottom:2,marginEnd:2,borderStyle:"shadow",color:"elevationFloating",rounding:3,padding:3,userSelect:"none",flex:"grow",column:l||g?12:3,width:g?"100%":void 0,position:"relative",children:[i.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"between",marginBottom:1,"aria-label":c[d].categories[e]||e,children:[i.jsx(o,{size:"sm",children:i.jsx(n,{text:c[d].categories[e]||e,type:p(e)})}),i.jsx(r,{size:"sm",selected:g,icon:g?"minimize":"maximize",onClick:()=>u(e),accessibilityLabel:g?c[d].minimize:c[d].expand,"aria-label":g?c[d].minimize:c[d].expand,"aria-pressed":g})]}),s.map((e=>i.jsx(m,{task:e,onToggleTask:t,showCategory:!1,language:d,isLoading:x.includes(e.id),onEditTask:y},e.id)))]}),T=({language:e})=>i.jsx(a,{padding:3,display:"flex",justifyContent:"center",children:i.jsx(o,{children:c[e].emptyTaskList})});function k({tasks:e,onToggleTask:n,onClearCompleted:r,filterStatus:d,groupBy:l,language:g,isMobile:p,loadingTaskIds:x=[],onEditTask:k}){const[f,h]=s.useState(null),j=e=>{h(f===e?null:e)},b=e=>[...e].sort(((e,i)=>e.completed===i.completed?0:e.completed?1:-1)),R=e.some((e=>e.completed))&&"pending"!==d;return i.jsxs(i.Fragment,{children:[i.jsxs(a,{marginTop:4,width:"100%",children:[i.jsx(a,{marginBottom:2,children:i.jsx(o,{size:"100",children:c[g].taskList})}),i.jsx(a,{display:p||"category"!==l?void 0:"flex",wrap:p||"category"!==l?void 0:"wrap",legend:c[g].taskList,children:(()=>{if(0===e.length)return i.jsx(T,{language:g});if("category"===l){const s=e.reduce(((e,i)=>(e[i.category]||(e[i.category]=[]),e[i.category].push(i),e)),{}),a=u.sortCategoriesByOrder(Object.keys(s));return[...a].sort(((e,i)=>f===e?-1:f===i?1:a.indexOf(e)-a.indexOf(i))).map((e=>i.jsx(y,{category:e,tasks:b(s[e]),onToggleTask:n,language:g,isMobile:p,isExpanded:f===e,onToggleExpand:j,loadingTaskIds:x,onEditTask:k},e)))}return b(e).map((e=>i.jsx(m,{task:e,onToggleTask:n,showCategory:"category"!==l,language:g,isLoading:x.includes(e.id),onEditTask:k},e.id)))})()})]}),R&&i.jsx(a,{marginTop:4,width:"100%",display:"flex",children:i.jsx(t,{text:c[g].clearCompleted,onClick:r,color:"red",fullWidth:p,size:p?"lg":"md","aria-label":c[g].clearCompleted})})]})}x.propTypes={children:e.node.isRequired,isCompleted:e.bool.isRequired},m.propTypes={task:e.shape({id:e.string.isRequired,text:e.string.isRequired,category:e.string.isRequired,completed:e.bool.isRequired}).isRequired,onToggleTask:e.func.isRequired,showCategory:e.bool.isRequired,language:e.string.isRequired,isLoading:e.bool,onEditTask:e.func.isRequired},m.defaultProps={isLoading:!1},y.propTypes={category:e.string.isRequired,tasks:e.array.isRequired,onToggleTask:e.func.isRequired,language:e.string.isRequired,isMobile:e.bool,isExpanded:e.bool,onToggleExpand:e.func.isRequired,loadingTaskIds:e.array,onEditTask:e.func.isRequired},y.defaultProps={loadingTaskIds:[]},T.propTypes={language:e.string.isRequired},k.propTypes={tasks:e.arrayOf(e.shape({id:e.string.isRequired,text:e.string.isRequired,category:e.string.isRequired,completed:e.bool.isRequired})).isRequired,onToggleTask:e.func.isRequired,onClearCompleted:e.func.isRequired,filterStatus:e.string.isRequired,groupBy:e.string,language:e.string.isRequired,isMobile:e.bool,loadingTaskIds:e.array,onEditTask:e.func.isRequired},k.defaultProps={groupBy:"none",isMobile:!1,loadingTaskIds:[]};export{k as T};
