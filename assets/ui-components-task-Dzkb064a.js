import{j as e,P as i}from"./ui-components-form-Dywr9yTf.js";import{r as s,B as a,f as o,c as t,j as r,I as n,d,k as l,R as g}from"./vendor-gestalt-B3UPgpSj.js";import{t as c,g as p}from"./app-constants-wElj3pIu.js";import{c as u}from"./app-services-B92wDHXI.js";import"./vendor-react-BCfQGrxo.js";import"./vendor-prop-types-CZV6H2So.js";import"./app-utils-CDJKhibu.js";import"./vendor-firebase-BBMrpKQ9.js";const m=({children:i,isCompleted:s})=>{const a=g.useRef(null);return e.jsx("div",{ref:a,style:{textDecoration:s?"line-through":"none"},children:e.jsx(o,{overflow:"breakWord",lineClamp:2,children:i})})},x=({task:i,onToggleTask:s,showCategory:t,language:g,isLoading:u,onEditTask:x})=>{const y=i.completed;return e.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"between",padding:2,opacity:y?.6:1,children:[u?e.jsxs(a,{paddingX:2,display:"flex",alignItems:"center",children:[e.jsx(d,{show:!0,size:"sm",accessibilityLabel:c[g].loadingTasks}),e.jsx(a,{paddingX:2,children:e.jsx(o,{children:i.text})})]}):e.jsx(l,{id:`task-${i.id}`,checked:y,label:e.jsx(m,{isCompleted:y,children:i.text}),onChange:()=>s(i.id),"aria-checked":y,"aria-label":i.text}),!y&&e.jsx(n,{icon:"edit",size:"xs",accessibilityLabel:c[g].editTask,onClick:()=>x(i),"aria-label":c[g].editTask}),t&&e.jsx(r,{text:c[g].categories[i.category]||i.category,type:p(i.category),"aria-label":c[g].categories[i.category]||i.category})]})},y=({category:i,tasks:s,onToggleTask:t,language:d,isMobile:l,isExpanded:g,onToggleExpand:u,loadingTaskIds:m,onEditTask:y})=>e.jsxs(a,{marginBottom:2,marginEnd:2,borderStyle:"shadow",color:"elevationFloating",rounding:3,padding:3,userSelect:"none",flex:"grow",column:l||g?12:3,width:g?"100%":void 0,position:"relative",children:[e.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"between",marginBottom:1,"aria-label":c[d].categories[i]||i,children:[e.jsx(o,{size:"sm",children:e.jsx(r,{text:c[d].categories[i]||i,type:p(i)})}),e.jsx(n,{size:"sm",selected:g,icon:g?"minimize":"maximize",onClick:()=>u(i),accessibilityLabel:g?c[d].minimize:c[d].expand,"aria-label":g?c[d].minimize:c[d].expand,"aria-pressed":g})]}),s.map((i=>e.jsx(x,{task:i,onToggleTask:t,showCategory:!1,language:d,isLoading:m.includes(i.id),onEditTask:y},i.id)))]}),k=({language:i})=>e.jsx(a,{padding:3,display:"flex",justifyContent:"center",children:e.jsx(o,{children:c[i].emptyTaskList})});function T({tasks:i,onToggleTask:r,onClearCompleted:n,filterStatus:d,groupBy:l,language:g,isMobile:p,loadingTaskIds:m=[],onEditTask:T}){const[j,f]=s.useState(null),h=e=>{f(j===e?null:e)},b=e=>[...e].sort(((e,i)=>e.completed===i.completed?0:e.completed?1:-1)),R=i.some((e=>e.completed))&&"pending"!==d;return e.jsxs(e.Fragment,{children:[e.jsxs(a,{marginTop:4,width:"100%",children:[e.jsx(a,{marginBottom:2,children:e.jsx(o,{size:"100",children:c[g].taskList})}),e.jsx(a,{display:p||"category"!==l?void 0:"flex",wrap:p||"category"!==l?void 0:"wrap",legend:c[g].taskList,children:(()=>{if(0===i.length)return e.jsx(k,{language:g});if("category"===l){const s=i.reduce(((e,i)=>(e[i.category]||(e[i.category]=[]),e[i.category].push(i),e)),{}),a=u.sortCategoriesByOrder(Object.keys(s));return[...a].sort(((e,i)=>j===e?-1:j===i?1:a.indexOf(e)-a.indexOf(i))).map((i=>e.jsx(y,{category:i,tasks:b(s[i]),onToggleTask:r,language:g,isMobile:p,isExpanded:j===i,onToggleExpand:h,loadingTaskIds:m,onEditTask:T},i)))}return b(i).map((i=>e.jsx(x,{task:i,onToggleTask:r,showCategory:"category"!==l,language:g,isLoading:m.includes(i.id),onEditTask:T},i.id)))})()})]}),R&&e.jsx(a,{marginTop:4,width:"100%",display:"flex",children:e.jsx(t,{text:c[g].clearCompleted,onClick:n,color:"red",fullWidth:p,size:p?"lg":"md","aria-label":c[g].clearCompleted})})]})}m.propTypes={children:i.node.isRequired,isCompleted:i.bool.isRequired},x.propTypes={task:i.shape({id:i.string.isRequired,text:i.string.isRequired,category:i.string.isRequired,completed:i.bool.isRequired}).isRequired,onToggleTask:i.func.isRequired,showCategory:i.bool.isRequired,language:i.string.isRequired,isLoading:i.bool,onEditTask:i.func.isRequired},x.defaultProps={isLoading:!1},y.propTypes={category:i.string.isRequired,tasks:i.array.isRequired,onToggleTask:i.func.isRequired,language:i.string.isRequired,isMobile:i.bool,isExpanded:i.bool,onToggleExpand:i.func.isRequired,loadingTaskIds:i.array,onEditTask:i.func.isRequired},y.defaultProps={loadingTaskIds:[]},k.propTypes={language:i.string.isRequired},T.propTypes={tasks:i.arrayOf(i.shape({id:i.string.isRequired,text:i.string.isRequired,category:i.string.isRequired,completed:i.bool.isRequired})).isRequired,onToggleTask:i.func.isRequired,onClearCompleted:i.func.isRequired,filterStatus:i.string.isRequired,groupBy:i.string,language:i.string.isRequired,isMobile:i.bool,loadingTaskIds:i.array,onEditTask:i.func.isRequired},T.defaultProps={groupBy:"none",isMobile:!1,loadingTaskIds:[]};export{T as default};
